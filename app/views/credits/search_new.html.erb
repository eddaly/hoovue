<script type="text/javascript">

$(document).ready(function(){

        $("#slidingDiv_new_work").hide();
        $("#show_hide_new_work").show();

    $('#show_hide_new_work').click(function(){
    $("#slidingDiv_new_work").slideToggle();
    });

});

</script>


<div class="container_12 pages">
	<h1>Add a credit</h1> 
	<div class="container_12">
<div class="grid_3 alpha add_credit_box">
	<h2>Work already on our site</h2>

<%= form_tag search_credits_path, :method => 'get' do %>

  <%= text_field_tag :search, params[:search], data: {autocomplete_source: Product.order(:title).map(&:title)}, :placeholder => "Enter a work name to search" %><br />
     <%= submit_tag "SEARCH", :name => nil, :class => "search-button" %>
  <%end%>
 
 </div>  


<div class="grid_3 add_credit_box">
<h2>Add a new work to our site</h2>	

<a id="show_hide_new_work">Add a new work +
</a>

</div>


<div class="grid_3 omega add_credit_box">
<h2>Quick add credit system</h2>	
	 <p>Use the form below to quickly add multiple credits. Previous role suggestions appear.</p>
<%= form_for(@credit) do |f| %>
 
 <%= text_field_tag :role, params[:role], data: {autocomplete_source: Credit.where(:user_id => current_user.id).order(:role).map(&:role).uniq}, :placeholder => "Type in a role", :class => "role" %> 
 

<%= select_tag :product_id, options_from_collection_for_select(Product.all, :id, :title, params[:product_id]), :class => "select-advanced" %>

    <%= f.submit 'Create Credit >', :class => 'submit'%>

<% end %>
</div>	
  </div>
  
  <div class="container_10 new_work" id="slidingDiv_new_work">
  <h1>New Work</h1>
  <div class="white-box">
 <%= form_for @product, :validate => true do |f| %>
    <% if @product.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

        <ul>
        <% @product.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

	
  
    <div class="field">
      <%= f.label :name %>
  	 <% if params[:name] == "1" %>
      <%= f.text_field :title, :title => "The name of the game is the title of a released version (alternative titles for the same game in other territories will be included in due course)." %>
  	<% else %>
  <%= f.text_field :title %>	
  	<% end %>
    </div>
	
	
	<div class="field">
		<%= f.label :category %>
	 <%= select_tag :product_genre_id, options_from_collection_for_select(ProductGenre.all, :id, :name, :product_genre_id), :class => "select-advanced" %>
	</div>	
	

  <%= f.hidden_field :product_genre_id, :value => params[:name] %>	
 
 
  	<div class="field">
  	<%= f.label :status %>
  	<%= f.select :status, [ ['Completed'], ['Live and Ongoing'], ['In Development']] %>
  	 </div><br />
	 
  	 <% if params[:name] == "1" %>
       <div class="field">
         <%= f.label :year_the_game_was_first_released_if_applicable %>
  	   <%= f.date_select :year, :discard_month => true, :start_year => 1980 %>
       </div>
  	 <br />
       <div class="field">
         <%= f.label :studio %>
  	   <%= f.text_field :studio %>
       </div>
  	 <% end %>
	 
  	 <% if params[:name] == "2" %>
       <div class="field">
         <%= f.label :year_the_website_was_launched_if_applicable %>
	
          <%= f.date_select :year, :discard_month => true, :start_year => 1980 %>
       </div>
  	 <% end %>

  	 <% if params[:name] == "3" %>
       <div class="field">
         <%= f.label :start_year %>
  	   <%= f.date_select :startdate, :discard_month => true, :start_year => 1900 %>
       </div>
       <div class="field">
         <%= f.label :end_year %>
  	   <%= f.date_select :enddate, :discard_month => true, :start_year => 1900 %>
       </div>
  	 <% end %>
	 
  	 <% if params[:name] == "4" %>
       <div class="field">
         <%= f.label :year_the_movie_was_released_if_applicable %>
	
         <%= f.date_select :year, :discard_month => true, :start_year => 1900 %>
       </div>
  	 <% end %>
	 
  	 <% if params[:name] == "5" %>
       <div class="field">
         <%= f.label :year_the_book_was_published_if_applicable %>
	
         <%= f.date_select :year, :discard_month => true, :start_year => 1900 %>
       </div>
  	 <% end %>
	 
  	 <% if params[:name] == "7" %>
       <div class="field">
         <%= f.label :year_of_first_broadcast_if_applicable %>
	
          <%= f.date_select :year, :discard_month => true, :start_year => 1950 %>
       </div>
  	 <% end %>

  	
     <div class="field">
      <%= f.label :work_page_main_image %>
      <%= f.file_field :image  %>
    </div>
    <div class="field">
     <%= f.label :work_page_other_image %>
     <%= f.file_field :image_2 %>
   </div>
   <div class="field">
    <%= f.label :work_page_other_image %>
    <%= f.file_field :image_3 %>
  </div>
    <div class="field">
     <%= f.label :youtube_video %>
     <%= f.text_field :video %>
   </div>
   <div class="field">
    <%= f.label :work_description %>
    <%= f.text_area :description, :rows => "10", :cols => "5" %>
  </div>
 
    <div class="field">
      <%= f.label :website %>
      <%= f.text_field :url, :title => "The image and URL used may relate to a specific version that not all credits will relate to (a range of images and other version information will be included in due course)." %>
    </div>

  
  
  <div class="submit">
   <%= f.submit 'Create Work >', :class => "submit" %>
  </div>
 
    </div>
    
  <% end %>
   </div>
  
  <p>
  <div id="products-list"> <%= render 'search_results'%></div>
   
</p>